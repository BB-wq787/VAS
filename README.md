# 貨物批次號識別器 (Batch Number Scanner)

一個基於網頁的應用程式，使用電腦攝像頭進行即時文字識別，專門用於識別貨物上的批次號。

## 功能特點

- 📷 即時攝像頭畫面預覽
- 🔍 Tesseract.js 文字識別
- 🎯 智能批次號提取（5開頭的10個字符）
- 📦 產品資料庫管理
- 🔗 批次號與產品自動關聯
- 📱 響應式設計，支援手機和電腦
- 🌐 純網頁應用，無需安裝

## 系統需求

- 現代瀏覽器 (Chrome, Firefox, Safari, Edge)
- 支援攝像頭的設備
- 網路連線 (用於載入OCR引擎)

## 安裝和運行

### 1. 安裝Python依賴

```bash
pip install -r requirements.txt
```

或手動安裝：

```bash
pip install flask
```


### 2. 初始化資料庫（可選）

如果需要添加示例數據：

```bash
python init_db.py
```

### 3. 運行應用程式

```bash
python app.py
```

### 4. 開啟瀏覽器

在瀏覽器中訪問：`http://localhost:5000`

## 使用說明

1. **啟動攝像頭**：點擊"啟動攝像頭"按鈕，允許瀏覽器存取攝像頭
2. **對準貨物**：將貨物上的批次號對準攝像頭畫面
3. **拍攝識別**：點擊"拍攝並識別"按鈕
4. **查看結果**：系統會自動提取批次號並顯示在結果區域
5. **產品資訊**：如果批次號已在資料庫中註冊，會顯示對應的產品名稱

## 批次號格式

**當前支援的批次號格式**：
- **主要格式**：以 `5` 開頭的 10 個字符
- **格式範例**：`5123456789`, `5ABC123DEF`, `5A1B2C3D4E`
- **備用格式**：允許空格或連字符分隔，如 `5 123 456 789`

**系統會自動識別和提取符合格式的批次號**。

## 產品與批次管理

應用程式包含完整的产品与批次管理系统：

### 功能特點
- ➕ **新增產品**：創建新產品（自動分配產品代碼 A, B, C...）
- 📦 **新增批次**：為產品添加批次（自動生成唯一編號 A1, A2, B1...）
- ✏️ **編輯產品/批次**：修改產品名稱或批次號
- 🗑️ **刪除產品/批次**：移除產品（連帶刪除所有批次）或單個批次
- 🔍 **批次號關聯**：識別器自動顯示產品名稱、唯一編號等資訊

### 資料結構
- **產品表**：產品名稱、產品代碼（A, B, C...）
- **批次表**：批次號、所屬產品、唯一編號（A1, A2, B1...）
- **關係**：一個產品可以有多個批次，每個批次有唯一的編號

### 操作說明

1. **進入產品管理**：點擊導航欄的「📦 產品管理」

2. **新增產品**：
   - 點擊「➕ 新增產品」按鈕
   - 輸入產品名稱
   - 系統自動分配產品代碼（A, B, C...）

3. **新增批次**：
   - 點擊「📦 新增批次」按鈕
   - 選擇產品
   - 輸入批次號（必須是以5開頭的10個字符）
   - 系統自動生成唯一編號（A1, A2, B1...）

4. **編輯/刪除**：點擊表格中的對應按鈕

### 資料驗證
- 產品名稱必填且唯一
- 批次號必須是以5開頭的10個字符
- 批次號在全系統中必須唯一
- 唯一編號自動生成，格式為「產品代碼+序號」

## OCR引擎

應用程式使用 **Tesseract.js** 作為OCR引擎：

- **完全免費**：無需網路，離線使用
- **客戶端處理**：在瀏覽器中運行，保護隱私
- **支援語言**：英文 + 中文簡體
- **處理速度**：快，適合即時識別
- **準確度**：適合清晰的批次號識別


## 💡 使用特點

- **完全離線**：無需網路連線
- **即時處理**：在瀏覽器中快速識別
- **隱私保護**：圖像資料不會上傳到伺服器
- **輕量級**：適合一般批次號識別需求



## 技術架構

- **後端**：Flask (Python)
- **資料庫**：SQLite (內建sqlite3模組) - 產品表 + 批次表
- **前端**：HTML5, CSS3, JavaScript
- **OCR引擎**：Tesseract.js（客戶端）
- **攝像頭存取**：WebRTC API
- **圖像處理**：Canvas API + 自訂預處理
- **資料庫**：SQLite (products.db)

## 故障排除

### 攝像頭無法存取
- 確保瀏覽器有權限存取攝像頭
- 檢查其他應用程式是否正在使用攝像頭
- 嘗試重新整理頁面

### OCR識別不準確
- 確保貨物上的文字清晰可見
- 調整光線條件
- 嘗試不同的角度和距離

### 載入緩慢
- Tesseract.js 引擎首次載入需要下載語言模型
- 請確保網路連線穩定，首次載入可能需要一些時間
- 載入完成後即可離線使用

## 開發資訊

- **前端檔案**：`templates/index.html`, `static/style.css`, `static/script.js`
- **後端檔案**：`app.py`
- **OCR引擎**：使用Tesseract.js進行客戶端OCR處理

## 授權

本專案僅供學習和個人使用。
